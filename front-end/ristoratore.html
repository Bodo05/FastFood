<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ristoratore - Fast Food</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<style>.card-small { width: 150px; margin: 5px; }</style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light p-2">
  <a class="navbar-brand" href="#">FAST FOOD</a>
  <button class="btn btn-outline-danger ms-auto" onclick="logout()">Logout</button>
</nav>

<div class="container mt-3">
  <h3>I tuoi piatti</h3>
  <div id="piattiContainer" class="d-flex flex-wrap"></div>
</div>

<script>
function logout(){
    localStorage.clear();
    window.location.href = "login.html";
}

window.onload = async function(){
    const _id = localStorage.getItem("_id");
    if(!_id) { window.location.href = "login.html"; return; }

    const res = await fetch(`http://localhost:3000/ristoratore/${_id}`);
    const risto = await res.json();
    const piatti = risto.piatti || [];

    const container = document.getElementById("piattiContainer");
    container.innerHTML = "";
    piatti.forEach(p=>{
        const card = document.createElement("div");
        card.className = "card card-small text-center p-2";
        card.innerHTML = `
            <img src="${p.thumb}" class="card-img-top" alt="${p.nome}">
            <div class="card-body p-2">
                <h6>${p.nome}</h6>
                <p>â‚¬${p.price}</p>
                <p>${p.prepTime} min</p>
            </div>
        `;
        container.appendChild(card);
    });
};
</script>
</body>
</html>
